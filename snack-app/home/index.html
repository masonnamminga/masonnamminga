<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vending Machiene App</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet prefetch" href="https://fonts.googleapis.com/css?family=Coda">
</head>

<body class="d-flex flex-column min-vh-100" style="text-align: center;">

    <main class="flex-grow-1">
        <br>
        <center>
            <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
            <lottie-player src="https://assets4.lottiefiles.com/packages/lf20_egmSxc.json" background="transparent"
                speed="1" style="width: 250px;" loop autoplay></lottie-player>
        </center>
        <h3 id="title" style="line-height:1; margin:0;">VEND<br> Mobile Wallet</h3>
        <br><br>

        <button type="button" class="btn btn-outline-light" id="Create" style="color: white;"
            onmouseover="this.style.color='#9571FF';" onmouseout="this.style.color='white';">
            Create New Wallet
        </button>

        <button type="button" class="btn btn-light" id="Login" style="color: #9571FF;">
            Login to Wallet
        </button>

        <!-- create account modal -->
        <div class="modal fade" id="modal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
            <div class="modal-content">
            
            <div class="modal-body" style="text-align: center;">

            <div id="enterDetails">
            
               
                <h4>ü´Ü Authenication Key</h4>
                <input id="enterID" type="text" readonly>
                
                <button class="btn btn-secondary" id="generateID">Create a Key</button>
                <br>
                <p>Click to create a unique account key.</p>
             
                

                <hr>
                <h4>üë§ Username</h4>
                <p>Enter your first name</p>
                <input id="enterName" type="text" oninput="this.value = this.value.toUpperCase();" style="text-transform:uppercase;">
                <div style="display:none">
                <h4>Age</h4>
                <input id="enterAge" type="number" value="5">
                </div>
                <br><br>
                <h4>üîê Pin</h4>
                <p>Keep it short, and easy to remember.</p>
                <div>
                <span tooltip="Create something easy & unique." flow="down"><input id="enterPin"
                type="number"></span>
                </div>
                <br>
                <div style="display: none;">
                <button>INSERT</button>
                <button id="update">UPDATE</button>
                <button id="remove">REMOVE</button> <br><br>
                </div>
            </div>
            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button id="insert" type="button" class="btn btn-primary" data-dismiss="modal" disabled>Create
                Account</button>
            </div>
            </div>
            </div>
        </div>

        <script>
        (function () {
          const enterID = document.getElementById('enterID');
          const enterName = document.getElementById('enterName');
          const enterPin = document.getElementById('enterPin');
          const generateID = document.getElementById('generateID');
          const insertBtn = document.getElementById('insert');

          function validate() {
            const hasID = enterID.value && enterID.value.trim().length > 0;
            const hasName = enterName.value && enterName.value.trim().length > 0;
            const hasPin = enterPin.value && enterPin.value.toString().trim().length > 0;
            insertBtn.disabled = !(hasID && hasName && hasPin);
          }

          generateID.addEventListener('click', function () {
            // generate a simple unique key
            const key = 'VEND-' + Math.random().toString(36).substr(2, 8).toUpperCase();
            enterID.value = key;
            validate();
          });

          enterName.addEventListener('input', validate);
          enterPin.addEventListener('input', validate);

          // Ensure state is correct when modal opens
          if (window.jQuery) {
            $('#modal1').on('show.bs.modal', function () {
              validate();
            });
            $('#modal1').on('hidden.bs.modal', function () {
              // optional: clear inputs when closed
              // enterID.value = '';
              // enterName.value = '';
              // enterPin.value = '';
              validate();
            });
          } else {
            // fallback if jQuery not available
            document.getElementById('modal1').addEventListener('show', validate);
          }

          // initial validation
          validate();
        })();
        </script>


        <!-- login to account modal -->
        <div class="modal fade" id="modal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <div id="findByNameAndPin">
                            <center style="padding: 5%;">
                                <script
                                    src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
                                <lottie-player
                                    src="https://lottie.host/18cc40e6-922e-4469-9293-29faddcfcdb3/MjyoeG1cmM.json"
                                    background="##FFFFFF" speed="1" style="width: 100px; height: 100px" loop autoplay
                                    direction="1" mode="normal"></lottie-player>
                            </center>
                            <h4>üë§ Username</h4>
                            <input id="findNameInput" type="text" oninput="this.value = this.value.toUpperCase();" style="text-transform:uppercase;">
                            <br><br>
                            <h4>üîê Pin</h4>
                            <input id="findPinInput" type="number"> <br><br>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button id="findByNameAndPinBtn" type="button" class="btn btn-primary"
                            data-dismiss="modal">Login</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- contacting server -->
        <div class="modal fade bd-example-modal-sm1" id="modal3" tabindex="-1" role="dialog"
            aria-labelledby="mySmallModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-sm">
                <div class="modal-content" style="align-items: center;">
                    <br>
                    <h4>Contacting Database</h4>
                    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
                    <lottie-player src="https://lottie.host/1f256429-179c-48e0-9c8b-5075f3c529b8/JK7egnEKdd.json"
                        background="##fff" speed="1" style="width: 200px; height: 200px" loop autoplay direction="1"
                        mode="normal"></lottie-player>
                </div>
            </div>
        </div>

        <!-- creating account (hammer) -->
        <div class="modal fade bd-example-modal-sm2" id="modal4" tabindex="-1" role="dialog"
            aria-labelledby="mySmallModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-sm">
                <div class="modal-content" style="align-items: center;">
                    <br>
                    <h4>Creating Account</h4>

                    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
                    <lottie-player src="https://lottie.host/5f22d1d7-0e9b-4a02-84cb-bb0b64bc9958/93gxjWy5c1.json"
                        background="##FFFFFF" speed="1" style="width: 200px; height: 200px" loop autoplay direction="1"
                        mode="normal"></lottie-player>
                    <br><br>
                </div>
            </div>
        </div>

        <!-- your in -->
        <div class="modal fade bd-example-modal-sm3" id="modal5" tabindex="-1" role="dialog"
            aria-labelledby="mySmallModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-sm">
                <div class="modal-content" style="align-items: center;">
                    <br>
                    <h4>You're In!</h4>
                    <p>Login saved to the Vend database. <br> Please login.</p>
                    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
                    <lottie-player src="https://lottie.host/634f2ff8-5405-4731-ad97-82a5607c0198/VBvzjRdkQn.json"
                        background="#FFFFFF" speed="1" style="width: 200px; height: 200px" loop autoplay direction="1"
                        mode="normal"></lottie-player>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Take me to Login</button>
                    <br>
                </div>
            </div>
        </div>

        <!-- account does not exist -->
        <div class="modal fade bd-example-modal-sm3" id="modal6" tabindex="-1" role="dialog"
            aria-labelledby="mySmallModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-sm">
                <div class="modal-content" style="align-items: center;">
                    <br>
                    <h4>Account Doesn't Exist...</h4>
                    <br>
                    <h6>Did you forget your login?</h6>
                    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
                    <lottie-player src="https://lottie.host/477d441f-c83f-41fc-8877-af8e91ca23dd/6baUZgPwP7.json"
                        background="#fff" speed="1" style="width: 200px; height: 200px" loop autoplay direction="1"
                        mode="normal"></lottie-player>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Try Again</button>
                    <br>
                </div>
            </div>
        </div>

        <!-- searching for account -->
        <div class="modal fade bd-example-modal-sm3" id="modal7" tabindex="-1" role="dialog"
            aria-labelledby="mySmallModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-sm">
                <div class="modal-content" style="align-items: center;">
                    <br>
                    <h4>Searching for Account...</h4>
                    <br>
                    <script src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs"
                        type="module"></script>
                    <dotlottie-player
                        src="https://lottie.host/ad757d3f-a984-48f3-980f-7dcdaa8fc6f1/YCUzIEupZJ.json"
                        background="transparent" speed="1" style="width: 200px; height: 200px;" loop
                        autoplay></dotlottie-player>
                    <br>
                </div>
            </div>
        </div>

        <!-- Account found modal -->
        <div class="modal fade bd-example-modal-sm3" id="modal8" tabindex="-1" role="dialog"
            aria-labelledby="mySmallModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-sm">
                <div class="modal-content" style="align-items: center;">
                    <br>
                    <h4>I found your account!</h4>
                    <script src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs"
                        type="module"></script>
                    <dotlottie-player
                        src="https://lottie.host/634f2ff8-5405-4731-ad97-82a5607c0198/VBvzjRdkQn.json"
                        background="transparent" speed="1" style="width: 200px; height: 200px;" loop
                        autoplay></dotlottie-player>
                    <br>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Let's Go!</button>
                    <br>
                </div>
            </div>
        </div>

        <!-- table to display logged in user -->
        <div id="hidden" style="display: none;">
            <div class="container mt-4" style="text-align: left;">
                <table class="table" style="color:white">
                    <tbody>
                        <tr>
                            <td>Name:</td>
                            <td id="foundName" type="text"></td>
                        </tr>
                        <tr>
                            <td>Balance:</td>
                            <td>
                                <p id="foundAge" type="number"></p>
                            </td>
                        </tr>
                        <tr>
                            <td>Authenication Key:</td>
                            <td id="foundID" type="text"></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
                <center> <h4 style="color:white">HOLD QR CODE TO MACHINE SCANNER</h4></center>
               
            </div>
            <br>
       
            <center>
                <div id="qrcode"></div>
            </center>
            <br>
        </div>

        <!-- dont need this -->
        <div id="findDetails" style="display: none;">
            <h1>Find by ID</h1>
            <h4>ID</h4>
            <input id="findID" type="text"> <br><br>
            <button id="find">FIND</button>
            <h3 id="findName" type="text"></h3>
            <h3 id="findAge" type="number"></h3> <br><br>
            <h3 id="findPin" type="text"></h3> <br><br>
        </div>

        <div style="display: none;">
            <button id="subtractButton1">-1</button>
            <button id="subtractButton2">-2</button>
            <button id="subtractButton3">-3</button>
            <br><br>
            <button id="addButton1">+1</button>
            <button id="addButton2">+2</button>
            <button id="addButton3">+3</button>
        </div>
    </main>

    <!-- Footer -->
    <footer class=" text-white text-center py-3 mt-auto">
        &copy; VEND Snacking Soultions, LLC
    </footer>

    <!-- move QR lib + module here so DOM exists and QRCode is available -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script type="module" src="script.js"></script>
</body>

</html>
